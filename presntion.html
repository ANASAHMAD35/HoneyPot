<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlTag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Dynamic Presntion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Tajawal:wght@400;700&display=swap');

        :root {
            --matrix-green: #00ff41;
            --dark-bg: #000800;
        }

        body {
            font-family: 'Tajawal', 'Courier Prime', sans-serif;
            background: var(--dark-bg);
            color: var(--matrix-green);
            overflow: hidden;
            margin: 0;
            height: 100vh;
        }

        #matrix-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.15;
        }

        .glass-panel {
            background: rgba(0, 10, 0, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--matrix-green);
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
            height: 75vh;
            display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;
        }

        .image-display { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 4px; }

        .lang-btn, .nav-btn {
            border: 1px solid var(--matrix-green); padding: 8px 16px; border-radius: 4px;
            transition: all 0.3s ease; cursor: pointer; font-family: 'Courier Prime', 'Tajawal', monospace;
            display: flex; align-items: center; gap: 8px;
        }

        .lang-btn:hover, .nav-btn:hover, .lang-btn.active { background: var(--matrix-green); color: black; box-shadow: 0 0 10px var(--matrix-green); }

        .loading-screen { position: absolute; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; }

        .nav-controls { display: flex; align-items: center; gap: 20px; margin-top: 20px; justify-content: center; }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>

    <nav class="border-b border-green-900 bg-black/80 sticky top-0 z-50 px-6 py-3">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="border border-green-500 p-2 rounded shadow-[0_0_10px_#00ff41]"><i class="fas fa-folder-open text-green-500 text-xl"></i></div>
                <h1 class="text-xl font-bold tracking-widest uppercase">Matrix.presntion(<span id="currentLangLabel" class="text-white">AR</span>)</h1>
            </div>
            <div class="flex gap-2">
                <button onclick="switchLanguage('ar')" id="btn-ar" class="lang-btn active">AR</button>
                <button onclick="switchLanguage('en')" id="btn-en" class="lang-btn">EN</button>
                <button onclick="switchLanguage('fr')" id="btn-fr" class="lang-btn">FR</button>
                <button onclick="switchLanguage('de')" id="btn-de" class="lang-btn">DE</button>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto p-4 md:p-6">
        <div class="glass-panel relative p-2">
            <div id="loader" class="loading-screen">
                <i class="fas fa-search fa-spin mb-4 text-4xl"></i>
                <p id="loaderText" class="animate-pulse">SCANNING_DIRECTORY...</p>
            </div>
            <img id="mainImage" class="image-display hidden" alt="Matrix Content">
        </div>

        <div class="nav-controls">
            <button onclick="prevImage()" class="nav-btn"><i class="fas fa-chevron-right icon-prev"></i><span id="textPrev">السابق</span></button>
            <div class="font-mono text-sm border-x border-green-900 px-6">
                <span id="labelFileId">FILE_ID</span>: <span id="imgIndex">1</span> / <span id="totalSlides">10</span>
            </div>
            <button onclick="nextImage()" class="nav-btn"><span id="textNext">التالي</span><i class="fas fa-chevron-left icon-next"></i></button>
        </div>

        <div class="mt-8 flex justify-between items-center font-mono text-[10px] text-green-700 uppercase">
            <span id="pathDisplay">PATH: ./assets/ar/slide_1.jpg</span>
            <span id="kernelText">FS_MODE: DYNAMIC_INJECTION</span>
        </div>
    </main>

    <script>
        // --- إعدادات المجلدات والأسماء ---
        const CONFIG = {
            totalSlides: 12, // إجمالي عدد الصور المتوقع في كل مجلد
            extension: ".jpg", // امتداد الصور
            folders: {
                ar: { path: "slide_ar/", prefix: "slide_ar_" },
                en: { path: "slide_en/", prefix: "slide_en_" },
                fr: { path: "slide_fr/", prefix: "slide_fr_" },
                de: { path: "slide_de/", prefix: "slide_de_" }
            }
        };

        const translations = {
            ar: { dir: "rtl", prev: "السابق", next: "التالي", fileId: "شريحة", loading: "جارٍ فحص المجلد المحلي..." },
            en: { dir: "ltr", prev: "Previous", next: "Next", fileId: "Slide", loading: "Scanning local folder..." },
            fr: { dir: "ltr", prev: "Précédent", next: "Suivant", fileId: "Diapo", loading: "Analyse du dossier..." },
            de: { dir: "ltr", prev: "Zurück", next: "Weiter", fileId: "Folie", loading: "Ordner wird gescannt..." }
        };

        let currentLang = 'ar';
        let currentIndex = 1; // نبدأ من 1 لأن تسمية الملفات تبدأ غالباً من 1

        function switchLanguage(lang) {
            currentLang = lang;
            currentIndex = 1;
            document.getElementById('htmlTag').dir = translations[lang].dir;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');
            updateUI();
            loadImage();
        }

        function nextImage() {
            currentIndex = currentIndex >= CONFIG.totalSlides ? 1 : currentIndex + 1;
            updateUI();
            loadImage();
        }

        function prevImage() {
            currentIndex = currentIndex <= 1 ? CONFIG.totalSlides : currentIndex - 1;
            updateUI();
            loadImage();
        }

        function updateUI() {
            const t = translations[currentLang];
            const safeSet = (id, val) => { if(document.getElementById(id)) document.getElementById(id).innerText = val; };
            
            safeSet('currentLangLabel', currentLang.toUpperCase());
            safeSet('textPrev', t.prev);
            safeSet('textNext', t.next);
            safeSet('labelFileId', t.fileId);
            safeSet('imgIndex', currentIndex);
            safeSet('totalSlides', CONFIG.totalSlides);
            safeSet('loaderText', t.loading);

            // تحديث الأيقونات بناءً على الاتجاه
            const isRTL = t.dir === "rtl";
            document.querySelector('.icon-prev').className = `fas fa-chevron-${isRTL ? 'right' : 'left'} icon-prev`;
            document.querySelector('.icon-next').className = `fas fa-chevron-${isRTL ? 'left' : 'right'} icon-next`;
        }

        function loadImage() {
            const img = document.getElementById('mainImage');
            const loader = document.getElementById('loader');
            const pathDisplay = document.getElementById('pathDisplay');
            
            // تركيب المسار ديناميكياً
            const folderInfo = CONFIG.folders[currentLang];
            const fullPath = `${folderInfo.path}${folderInfo.prefix}${currentIndex}${CONFIG.extension}`;
            
            pathDisplay.innerText = `REQUESTING: ./${fullPath}`;
            img.classList.add('hidden');
            loader.classList.remove('hidden');

            const temp = new Image();
            temp.src = fullPath;
            temp.onload = () => {
                img.src = fullPath;
                loader.classList.add('hidden');
                img.classList.remove('hidden');
            };
            temp.onerror = () => {
                loader.innerHTML = `<div class="text-red-500 text-center"><i class="fas fa-exclamation-triangle mb-2 text-3xl"></i><p class="text-[10px]">NOT_FOUND: ${fullPath}</p></div>`;
            };
        }

        // Matrix Effect
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width/16)).fill(1);
        function draw() {
            ctx.fillStyle = 'rgba(0, 8, 0, 0.05)'; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = '#0F0'; ctx.font = '16px monospace';
            drops.forEach((y, i) => {
                const text = Math.random() > 0.5 ? "0" : "1";
                ctx.fillText(text, i*16, y*16);
                if(y*16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(draw, 50);

        document.addEventListener('DOMContentLoaded', () => switchLanguage('ar'));
    </script>
</body>
</html>